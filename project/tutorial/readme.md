# 一、数据预处理

> homework: 
>
> 1. 数据预处理学习笔记；
> 2. 2022年国赛真题问题一的第一小问，使用 SPSS 软件进行解答，结合视频中的内容来处理缺失值和异常值
>
> video: 
>
> [数据预处理专题解析](https://www.bilibili.com/video/BV1kC4y1a7Ee/)

## 前言

**大数据题 -- 必须数据预处理，尽管已给定的数据已经十分完美**

**想拿高分，数据预处理做好很关键，如果数据很干净，也要写“数据很干净”的说明**

数据预处理是数据挖掘中的重要一环，必不可少。脏数据会影响数据分析，或使挖掘结果差强人意



## 1. 数据可能会存在的问题

### （1）数据不一致

- 单位不统一（如 kg 和 g）
- 噪声数据：数据中存在错误或异常，偏离期望值（如身高体重=0）
- 缺失值：调查表里面有行空了

### （2）数据预处理主要任务

- 数据清理（清洗）
  - 去除数据噪声，纠正不一致——去除偏离趋势太远的值、**缺失值**、**异常值**
    - 数据特征提取
    - 剔除异常值（有时要用统计学模型发现、删除）
    - 剔除作废值
- 数据集成
  - 多个数据源合并成一致的数据存储，使数据完整
- 数据规约（消减）
  - 通过聚集、删除冗余属性或聚类等方法来压缩数据——即有些列是没必要看的，有些列的信息是重复的；给了你很多张表，但是其实是能够进行外连接或union操作的
- 数据变换（转换）
  - 将一种格式的数据转换为另一格式的数据——比如用对数把函数正态化方便做T检验
  - 归一化——数据标准化处理，把一个大范围数据（160,175）压缩到一定范围（0,1）、同数量级内，在求导、梯度、机器学习过程中有用。当一个行数据每一列的数据数量级明显不一样，会影响机器学习，导致最后数据可读性超差或没办法收敛
    - 最大最小规范化
    - 零-均值规范化
    - 小数定标规范化（少用）

下文主要展开说明每个点及方法



## 2. 缺失值、异常值的检测和处理

### （1）缺失值

#### 缺失值处理

  - 删除记录（如少了一个银行记录，一整个银行不要了）
  - 数据差补
    - 均值/中位数/众数差补
    - 固定值（固定设为国家标准、国家统计平均值）
    - 最近临差补（若有时间顺序，用最近一两个时间顺序的值代替；若无，用其他类似的数据点的对应的值）
    - 回归方法（建立一个回归方程，算x对应的预测y）
    - 插值法（拉格朗日插值法灵活性差，还可以考虑牛顿插值法）
  - 不处理（要是某些算法对于空值有用就可以不管）



### （2）异常值

#### 异常值判断*

- 正态分布 3sigma 原则，3sigma / 2sigma 开外的都认为是异常值，丢掉
- 箱线图 ，外面的离群点都不要，丢掉![image-20240721114015566](C:\Users\YZK\Desktop\数学建模\1\day1.assets\image-20240721114015566.png)
- 二位、三位散点图直接看或欧几里得计算

#### 异常值处理

- 删除异常值（变成缺失值）
- 视为缺失值
- 平均值修正
- 不处理



## 3. 特征工程

> 特征工程就是从原始数据提取特征的过程，这些特征可以很好地描述数据并且利用特征建立的模型在未知数据上的性能表现可以达到最优（或者接近最佳性能）。特征工程一般包括特征使用、特征获取、特征处理、特征选择和特征监控。

> 特征工程的处理流程为首先去掉无用特征，接着去除冗余的特征，如共线特征，并利用存在的特征、转换特征、内容中的特征以及其他数据源生成新特征，然后对特征进行转换(数值化、类别转换、归一化等)，最后对特征进行处理(异常值、最大值、最小值，缺失值等)，以符合模型的使用。简单来说，特征工程的处理一般包括数据预处理、特征处理、特征选择等工作，而特征选择视情况而定，如果特征数量较多，则可以进行特征选择等操作。

数据可能会有很多维度，我们需要从特定的维度上入手（Step1），把这些维度的数据加工成能用的形式（Step2），获取一个新的可分析的变量

### （1）Step 1   特征选择——找目标列，数值化

如何选择特征？

- 过滤法——发现数据间的相关关系很强，有很强的正/负相关性，又称主成分分析

  - 做 n\*n 矩阵格子，直接看两两变量之间的 x-y 图像
  - 做协方差矩阵 Covariance Matrix 或相关系数矩阵 Correlation
  - 看贡献率

- 包装法（了解）——通过机器学习，每次选n个，看下模型的预测效果（类似逐步回归）

- 嵌入法（了解）

建议做完主成分分析后紧接着做理论思考分析，说说做出的指标代表什么，言之有理都可

### （2）Step 2   数据预处理——补充缺失值、处理异常值

见上文

